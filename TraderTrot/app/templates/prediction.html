{% include "user_aside.html" %}
{% include "user_header.html" %}
{% include "ad_head.html" %}
{% load static %}
{% block content %}
<main id="main" class="main">

    <div class="pagetitle" style="margin-top: -5%;">
      <b><h1>TradeBook</h1></b>

      <section class="section">
        <div class="row">
          <div class="col-xl-12">

            <div class="card">
              <div class="card-body pt-3">
                <!-- Bordered Tabs -->
                <ul class="nav nav-tabs nav-tabs-bordered">
  
                  <li class="nav-item">
                    <button class="nav-link active btn btn-outline-success" data-bs-toggle="tab" data-bs-target="#profile-overview">Prediction</button>
                  </li>
                </ul>
                <div class="tab-content pt-2">
  
                  <div class="tab-pane fade show active profile-overview" id="profile-overview">
                    
                    <div class="row">
                      <div class="col-lg-12">
            
                        <div class="card">
                            <div class="card-body">
                              <h5 class="card-title"></h5>
                
                              <form class="row g-3" action="/prediction/" method="post" onsubmit="return Valida1();"  enctype="multipart/form-data">

                                {% csrf_token %}  <!-- this token takes data -->
  
                                <div class="row 6">
                                  <input name="stock" list="stock" class="form-select" id="floatingSelect" aria-label="Floating label select example" placeholder="Stock">
                                  <datalist id="stock">  
                                      <option selected>Stock</option>
                                        {% if list %}
                                        {% for i in list %}
                                        <option value={{i}}>{{i}}</option>
                                        {% endfor %}
                                       {% endif %}
                                      </datalist>
                                    </input>
                                </div>
                                <div class="">               
                                
                                </div>
                                  <span id="valid" style="color: red;text-align: center;"></span><br>

                                  <!-- Card with header and footer -->
                                    <div class="card">
                                        {% if price %}
                                        <div class="card-header">
                                        <div style="width:600;height:500">
                                            <h2><b>Predicted price = {{price.0.0}}</b></h2>
                                        </div>
                                        {% else %}
                                        <p>No graph was provided.</p>
                                        {% endif %}
                                        {% if graph %}
                                        <div style="width:600;height:500">
                                        {{ graph|safe }}
                                        </div>
                                        {% else %}
                                        <p>No graph was provided.</p>
                                        {% endif %}
                                        
                                    
                                        </div>
                                        
                                    </div>

                                  <div class="text-center">
                                    <input type="submit" class="btn btn-primary" value="Request">
                                    <button type="reset" class="btn btn-secondary">Reset</button>
                                  </div>
                                </form>
                
                            </div>
                          </div>
                        </div>
                    </div>
  
                  </div>

                    <!-- End Profile Edit Form -->
  
                  </div>
                </div>
                <!-- End Bordered Tabs -->
  
              </div>
            </div>
  
          </div>
        </div>
      </section>
      </div>
</main>
<script>
 
    function Valida1(){
      var a = document.getElementById('floatingSelect').value.trim();
     
      if(a=="")
        {
          document.getElementById('valid').innerHTML = "Enter Stock";
          return false;
        }
       
        else{
          return true;
        }
    }
  </script>
{% endblock %}